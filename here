import React, { useState, useEffect } from 'react';
import './ApiPageTemplate.css'; // Import the CSS file
import jsondata from './ApipageTemplate.json';
import Swagger from './Swagger';
import products from './Products';

const ApiPageTemplate = () => {
  const [content, setContent] = useState('');
  const [apiurl, setApiUrl] = useState('');

  const handleButtonClick = (contentType) => {
    const jsonContent = jsondata[contentType];
    setContent(jsonContent);
  };

  useEffect(() => {
    // Simulate clicking the "Overview" button by default
    handleButtonClick('overview');
  }, []); // The empty dependency array ensures this effect runs only once on mount

  const subscribe = () => {
    alert("If you subscribe, our team will reach out to you");
  };

  const handleApiTagClick = (url) => {
    setApiUrl(url);
  };

  const renderSwaggerComponent = () => {
    if (apiurl) {
      return <Swagger url={apiurl} />;
    }
    return null;
  };

  return (
    <>
      {/* First Row - Breadcrumbs */}
      <div className="breadcrumbs">
        Breadcrumbs: Home / 
      </div>

      {/* Second Row - Sidebar */}
      <div className="sidebar">
        <div className="sidebar-content">
          <img src="https://www.kotak.com/content/dam/Kotak/product_card_images/cms-payment-services.jpeg.transform/transformer-width-360-height-202/image.jpeg" alt="Sample Image" style={{ width: '10%',height: '50px' }} />
          <button onClick={subscribe}>Subscribe</button>
        </div>

        <div>
          <button onClick={() => handleButtonClick('overview')}>Overview</button>
          <button onClick={() => handleButtonClick('apis')}>APIS</button>
          <button onClick={() => handleButtonClick('documentation')}>Documentation</button>
        </div>
      </div>

      {/* Third Row - Content */}
      <div className="content">
        <div className='content_p' id='content_p'>
          {products.map((product, index) => (
            <a key={index} onClick={() => handleApiTagClick(product.url)}>
              {product.name}
            </a>
          ))}
        </div>

        <div className="image-container" id='image-container'>
          {renderSwaggerComponent()}
        </div>
      </div>
    </>
  );
};

export default ApiPageTemplate;
