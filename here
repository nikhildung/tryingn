// ApiPageTemplate.js
import React, { useState, useEffect } from "react";
import "./ApiPageTemplate.css"; // Import the CSS file
import jsondata from "./ApipageTemplate.json";
import SwaggerUI from "swagger-ui-react";
import Swagger from "./Swagger";

import products from "./Products";
const ApiPageTemplate = () => {
  const [content, setContent] = useState("");
  const [apiurl, setapiurl] = useState();
  const handleButtonClick = (contentType) => {
    const jsonContent = jsondata[contentType];
    setContent(jsonContent);
  };

  useEffect(() => {
    // Simulate clicking the "Overview" button by default
    handleButtonClick("overview");
  }, []); // The empty dependency array ensures this effect runs only once on mount
  const subscibe = () => {
    alert("If your subscibe, our team will reach out to you");
  };
  // const handleapiatags = () =>{

  //   setapiurl('https://petstore.swagger.io/v2/swagger.json')
  // }
  // const handleapitaglink = ()=>{
  //   console.log(e.Level)
  //   setapiurl(e.Level)
  // }
  const handleApiTagClick = (url) => {
    setapiurl(url);
  };
  // const handleapibuttonclick = ()=>{

  //   products.map((e)=>{
  //     if(e.Level=='API'){

  //       document.getElementById('content_p').innerHTML += `<a >${e.name}</a><br>`

  //       console.log(apiurl);
  //       // document.getElementById('image-container').innerHTML= `${<Swagger url={apiurl} />}`
  //     }
  //   })
  // }
  const renderSwaggerComponent = () => {
    if (apiurl) {
      return <Swagger url={apiurl} />;
    }
    return null;
  };

  return (
    <>
      {/* First Row - Breadcrumbs */}
      <div className="breadcrumbs">Breadcrumbs: Home /</div>

      {/* Second Row - Sidebar */}
      <div className="sidebar">
        <div className="sidebar-content">
          <img
            src="https://www.kotak.com/content/dam/Kotak/product_card_images/cms-payment-services.jpeg.transform/transformer-width-360-height-202/image.jpeg"
            alt="Sample Image"
            style={{ width: "10%", height: "50px" }}
          />
          <button onClick={() => subscibe()}>Subscribe</button>
        </div>

        <div>
          <button onClick={() => handleButtonClick("overview")}>
            Overview
          </button>
          <button onClick={() => handleButtonClick("apis")}>APIS</button>
          <button onClick={() => handleButtonClick("documentation")}>
            Documentation
          </button>
        </div>
      </div>

      {/* Third Row - Content */}
      <div className="content">
        <div className="content_p" id="content_p">


          {products.map((product) => (
                
               <a onClick={() => handleApiTagClick(product.Url)}>{product.name}</a>
           ))}
        </div>

        <div className="image-container" id="image-container">
          {/* {apiurl ? <Swagger url={apiurl}/>:(
        <img src="https://www.kotak.com/content/dam/Kotak/product_card_images/cms-payment-services.jpeg.transform/transformer-width-360-height-202/image.jpeg" alt="Sample Image" style={{ width: '10%',height: '50px' }} />)} */}
          {renderSwaggerComponent()}
        </div>
      </div>
    </>
  );
};

export default ApiPageTemplate;
