// App.js
import React, { useState } from 'react';
import TreeView from 'devextreme-react/tree-view';
import './App.css';

import jsonData from './data.json';

const itemTemplate = (item) => {
  if (item.Description) {
    return `${item.name} - ${item.Description}`;
  } else {
    return `${item.name}`;
  }
};

function App() {
  const [activeNode, setActiveNode] = useState(null);

  const onToggle = (node, toggled) => {
    if (activeNode) {
      activeNode.active = false;
    }
    node.active = true;
    if (node.children) {
      node.toggled = toggled;
    }
    setActiveNode(node);
  };

  return (
    <div className="container">
      <div className="tree-container">
        <TreeView
          dataSource={jsonData}
          keyExpr="id"  // Use 'id' as the key
          parentIdExpr="categoryId"  // Use 'categoryId' as the parent ID
          onToggle={onToggle}
          itemRender={itemTemplate}
        />
      </div>
      <div className="cards-container">
        {activeNode && activeNode.children && activeNode.children.map(child => (
          <div key={child.name} className="card">
            {child.name}
          </div>
        ))}
      </div>
    </div>
  );
}

export default App;
