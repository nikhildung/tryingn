import React, { useState } from "react";
import TreeView from "./TreeView";
import jsondata from "../ExploreAPI/ExploreAPIPage.json";
import TilesRendering from "./TilesRendering";
import "./ExploreAPIPage.css";

const ExploreAPIPage = () => {
  const [showFirstFeatureList, setShowFirstFeatureList] = useState(true);
  const Categories = jsondata.filter((node) => {
    return node.id.length === 1;
  });

  const handleNodeClick = () => {
    // When a parent in the tree is clicked, hide the first feature list
    setShowFirstFeatureList(false);
  };

  return (
    <div>
      <section className="gridlayout">
        <TreeView onNodeClick={handleNodeClick} />

        {showFirstFeatureList && (
          <ul className="featured_products_list">
            {Categories.map((child) => (
              <TilesRendering key={child.id} selectedNode={child} />
            ))}
          </ul>
        )}

        {!showFirstFeatureList && (
          {/* Render the second feature list or any other content */}
          <ul className="featured_products_list">
            {/* Render based on the clicked parent in the tree */}
          </ul>
        )}
      </section>
    </div>
  );
};

export default ExploreAPIPage;
